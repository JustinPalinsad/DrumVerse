[gd_scene load_steps=11 format=3 uid="uid://cwk1rs80lpik8"]

[ext_resource type="Script" uid="uid://rx6r0bp4jbfw" path="res://Menu Scenes/unlocked.gd" id="1_2qb43"]
[ext_resource type="Material" uid="uid://dykh6lk1hfo2u" path="res://Menu Shaders/Asset_Color.tres" id="2_r2lxx"]
[ext_resource type="Texture2D" uid="uid://cjai6r1kqfqv3" path="res://Assets/Button.png" id="3_r8c6e"]
[ext_resource type="Texture2D" uid="uid://dka04a2tr3qwu" path="res://Assets/Fancy Stuff/Unlock1.png" id="4_sfmeb"]
[ext_resource type="Texture2D" uid="uid://bpcq25eun2mr" path="res://Menu Assets/Locked_Card.png" id="5_1rjbl"]

[sub_resource type="Animation" id="Animation_vpdta"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Node2D/Effect:material:shader_parameter/opacity")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Node2D:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Node2D:position")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector2(0, 0)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Node2D/Unlock1:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Node2D/Unlock2:visible")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [false]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Node2D:visible")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="Animation" id="Animation_pcira"]
resource_name = "new_animation"
length = 3.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Node2D/Effect:material:shader_parameter/opacity")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1.93333),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Node2D:rotation")
tracks/1/interp = 2
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.0477377, 0.081071, 0.1, 0.133333, 0.157411, 0.190745, 0.226672, 0.260006, 0.291211, 0.324544, 0.352601, 0.385934, 0.409269, 0.442602, 0.46668, 0.500014, 0.535941, 0.569275, 0.60048, 0.633813, 0.66187, 0.695204, 0.719369, 0.752703, 0.77678, 0.810114, 0.846041, 0.879375, 0.91058, 0.943913, 0.97197, 1.0053, 1.02475, 1.05808, 1.08216, 1.11549, 1.15142, 1.18475, 1.21596, 1.24929, 1.27735, 1.31068, 1.33373, 1.36706, 1.39114, 1.42447, 1.4604, 1.49374, 1.52494, 1.55827, 1.58633, 1.61966, 1.64226, 1.67559, 1.69967, 1.733, 1.76893, 1.80226, 1.83347, 1.8668, 1.89486, 1.92819, 2.02832, 2.06469, 2.13333, 2.2, 2.23333, 2.2779, 2.31425, 2.42734, 2.53084, 2.53333, 3),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1.51572, 1),
"update": 0,
"values": [0.0, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, -0.0490165, 0.0392135, 0.00380775, 0.210108, -0.0241755, -0.0241755, -0.143668, 0.030628, 0.0, 0.0, -0.00254641, 0.0, 2.70404]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("Node2D:position")
tracks/2/interp = 2
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(2.43333, 3.00002),
"transitions": PackedFloat32Array(1.51572, 1),
"update": 0,
"values": [Vector2(0, 0), Vector2(0, 1933)]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("Node2D/Unlock1:visible")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0, 2.06467),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("Node2D/Unlock2:visible")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0, 2.2294),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [false, true]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("Node2D:visible")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(2.2294),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [true]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_b3p07"]
_data = {
&"RESET": SubResource("Animation_vpdta"),
&"new_animation": SubResource("Animation_pcira")
}

[sub_resource type="Shader" id="Shader_mgsxb"]
code = "shader_type canvas_item;

uniform vec4 layer_color : source_color;
uniform vec4 sub_color : source_color;
uniform float opacity : hint_range(0.0, 1.0) = 1.0;

void fragment() {
    vec4 src = texture(TEXTURE, UV);
    float luminance = dot(src.rgb, vec3(0.2, 0.7, 0.07));
    vec3 recolored = mix(sub_color.rgb, layer_color.rgb, luminance);
    COLOR = vec4(recolored, src.a * opacity);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_24l60"]
shader = SubResource("Shader_mgsxb")
shader_parameter/layer_color = Color(1, 1, 1, 1)
shader_parameter/sub_color = Color(1, 1, 1, 1)
shader_parameter/opacity = 0.0

[node name="unlocked" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("1_2qb43")

[node name="Node2D" type="Node2D" parent="."]
position = Vector2(960, 552)

[node name="Button" type="Sprite2D" parent="Node2D"]
material = ExtResource("2_r2lxx")
position = Vector2(0, 32)
texture = ExtResource("3_r8c6e")

[node name="AnimationPlayer" type="AnimationPlayer" parent="Node2D"]
libraries = {
&"": SubResource("AnimationLibrary_b3p07")
}
autoplay = "new_animation"

[node name="Node2D" type="Node2D" parent="Node2D"]

[node name="Unlock1" type="Sprite2D" parent="Node2D/Node2D"]
visible = false
position = Vector2(-2, -327)
scale = Vector2(1.00197, 1)
texture = ExtResource("4_sfmeb")

[node name="Unlock2" type="Sprite2D" parent="Node2D/Node2D"]
visible = false
position = Vector2(-2, -327)
rotation = 3.14159
scale = Vector2(1.002, 1)
texture = ExtResource("4_sfmeb")

[node name="LockedCard" type="Sprite2D" parent="Node2D/Node2D"]
material = ExtResource("2_r2lxx")
texture = ExtResource("5_1rjbl")

[node name="Effect" type="Sprite2D" parent="Node2D/Node2D"]
clip_children = 2
material = SubResource("ShaderMaterial_24l60")
texture = ExtResource("5_1rjbl")

[connection signal="animation_finished" from="Node2D/AnimationPlayer" to="." method="_on_animation_player_animation_finished"]
